# CVAE（Conditional Variational Autoencoder）

## 1. 一句话
- 给定条件/输入 `x`，用 VAE 建模带随机性的映射 `p(y|x)`（`y` 是下游任务的目标/GT），实现“可控生成”或“条件重构”。

## 2. 常见建模方式（示意，贴近 supervised 表达）
- 推断（后验）：`q(z|x,y)`
- 生成（解码）：`p(y|x,z)`
- 先验可选：`p(z)` 或 `p(z|x)`

## 3. `x / y` 分别是什么
- 本文约定：`x` 是**已知条件/输入**（训练/推理时都给定），`y` 是**要生成/重构的目标**（训练时来自数据集 GT）。
- 文献里也常见把“要生成的变量”写作 `x`、把条件写作 `y`；只要对应到 `q(z|cond,target)` 和 `p(target|cond,z)` 即可。

## 4. 训练目标
- 本质还是条件版 ELBO：在重构项/KL 项里把条件 `x` 带进去（参考 `modules/ELBO.md`）

## 5. 实现要点
- 条件 `x` 怎么注入：拼接、FiLM、条件归一化、cross-attention（看模型规模）

## 6. 常见坑
- 条件被忽略（模型学会不看 `x`）：需要检查注入位置、条件编码器容量、训练信号是否足够
