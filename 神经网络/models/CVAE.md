# CVAE（Conditional Variational Autoencoder）

## 1. 一句话
- 在 VAE 中引入条件 `y`（标签/属性/文本/任意侧信息），实现“可控生成”或“条件重构”。

## 2. 常见建模方式（示意）
- 推断：`q(z|x,y)`
- 生成：`p(x|z,y)`
- 先验可选：`p(z)` 或 `p(z|y)`

## 3. `y` 到底是什么（条件 ≈ 额外输入）
- `y` 是**已知的条件变量**：训练时一般就来自数据集的标注/侧信息（GT 标签、属性、文本等），所以会作为 Encoder/Decoder 的额外输入。
- 这确实“用到了监督信号”，但目的不是做分类本身，而是学习条件生成分布 `p(x|y)`（推理/生成时你也需要提供想要的 `y`）。
- 如果训练时没有 `y`：严格来说不是 CVAE；常见做法是把 `y` 当作潜变量做半监督 VAE，或先用别的模型预测/构造 `y` 再做条件生成。

## 4. 训练目标
- 本质还是条件版 ELBO：在重构项/KL 项里把条件带进去（参考 `modules/ELBO.md`）

## 5. 实现要点
- 条件 `y` 怎么注入：拼接、FiLM、条件归一化、cross-attention（看模型规模）

## 6. 常见坑
- 条件被忽略（模型学会不看 y）：需要检查注入位置、条件编码器容量、训练信号是否足够
